#include <iostream>
using namespace std;

struct BookNode {
    int id;
    string title;
    string author;
    bool issued;
    BookNode* next;

    BookNode(int i, string t, string a) {
        id = i;
        title = t;
        author = a;
        issued = false;
        next = nullptr;
    }
};

class Library {
private:
    BookNode* head;

public:
    Library() {
        head = nullptr;
    }

    ~Library() {
        BookNode* temp;
        while (head) {
            temp = head;
            head = head->next;
            delete temp;
        }
    }

    void addBook(int id, string title, string author) {
        BookNode* newBook = new BookNode(id, title, author);
        newBook->next = head;
        head = newBook;
        cout << "Book added successfully.\n";
    }

    void issueBook(int id) {
        BookNode* temp = head;
        while (temp) {
            if (temp->id == id) {
                if (!temp->issued) {
                    temp->issued = true;
                    cout << "Book issued successfully.\n";
                } else {
                    cout << "Book already issued.\n";
                }
                return;
            }
            temp = temp->next;
        }
        cout << "Book not found.\n";
    }

    void returnBook(int id) {
        BookNode* temp = head;
        while (temp) {
            if (temp->id == id) {
                if (temp->issued) {
                    temp->issued = false;
                    cout << "Book returned successfully.\n";
                } else {
                    cout << "Book was not issued.\n";
                }
                return;
            }
            temp = temp->next;
        }
        cout << "Book not found.\n";
    }

    void searchBook(string title) {
        BookNode* temp = head;
        while (temp) {
            if (temp->title == title) {
                cout << "Book Found:\n";
                cout << "ID: " << temp->id << endl;
                cout << "Title: " << temp->title << endl;
                cout << "Author: " << temp->author << endl;
                cout << "Status: " << (temp->issued ? "Issued" : "Available") << endl;
                return;
            }
            temp = temp->next;
        }
        cout << "Book not found.\n";
    }

    void displayAll() {
        if (!head) {
            cout << "Library is empty.\n";
            return;
        }

        BookNode* temp = head;
        while (temp) {
            cout << "\nID: " << temp->id << endl;
            cout << "Title: " << temp->title << endl;
            cout << "Author: " << temp->author << endl;
            cout << "Status: " << (temp->issued ? "Issued" : "Available") << endl;
            temp = temp->next;
        }
    }
};

int main() {
    Library lib;

    lib.addBook(1, "C++ Basics", "Bjarne");
    lib.addBook(2, "Data Structures", "Mark");
    lib.addBook(3, "Algorithms", "Thomas");

    cout << "\nAll Books:\n";
    lib.displayAll();

    cout << "\nIssuing Book ID 2\n";
    lib.issueBook(2);

    cout << "\nSearching for 'Algorithms'\n";
    lib.searchBook("Algorithms");

    cout << "\nReturning Book ID 2\n";
    lib.returnBook(2);

    cout << "\nFinal Book List:\n";
    lib.displayAll();

    return 0;
}
